Диаграмма на листке, так как писал её в отсутствие компа под рукой.
Логику программы можно изменить (функции-сеттеры перенести к родителям) для уменьшения дублирования кода - до дедлайна просто не успею, к сожалению. 
